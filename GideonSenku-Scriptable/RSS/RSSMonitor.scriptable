{
  "always_run_in_app" : false,
  "icon" : {
    "color" : "deep-green",
    "glyph" : "rss"
  },
  "name" : "RSSMonitor",
  "script" : "\/*\n * Author: evilbutcher\n * Github: https:\/\/github.com\/evilbutcher\n * 本脚本使用了@Gideon_Senku的Env.scriptable，感谢！\n *\/\nconst goupdate = true; \/\/默认关闭，需要更新时请手动打开\nconst $ = new importModule(\"Env\")();\n\/\/ 填写RSS订阅链接,默认为仓库的最近Commit\n\/\/ Fill in the RSS subscription link, the default is the latest Commit of the Repo\nvar rsslink = \"https:\/\/github.com\/GideonSenku\/Scriptable\/commits\/master.atom\";\ntry {\n  const con = new importModule(\"Config\")();\n  var rsslink = con.rsslink();\n  console.log(\"将使用配置文件内订阅链接\");\n} catch (e) {\n  console.log(\"将使用脚本内订阅链接\");\n}\n\nconst res = await getinfo();\n\nlet widget = createWidget(res);\nScript.setWidget(widget);\nScript.complete();\n\nfunction createWidget(res) {\n  if (res.status == \"ok\") {\n    var titlerss = res.feed.title;\n    var group = res.items;\n    items = [];\n    for (var i = 0; i < 6; i++) {\n      var item = group[i].title;\n      items.push(item);\n    }\n    console.log(items);\n\n    const w = new ListWidget();\n    const bgColor = new LinearGradient();\n    bgColor.colors = [new Color(\"#1c1c1c\"), new Color(\"#29323c\")];\n    bgColor.locations = [0.0, 1.0];\n    w.backgroundGradient = bgColor;\n    w.centerAlignContent();\n\n    const firstLine = w.addText(`[📣]${titlerss}`);\n    firstLine.textSize = 14;\n    firstLine.textColor = Color.white();\n    firstLine.textOpacity = 0.7;\n\n    const top1Line = w.addText(`•${items[0]}`);\n    top1Line.textSize = 12;\n    top1Line.textColor = Color.white();\n\n    const top2Line = w.addText(`•${items[1]}`);\n    top2Line.textSize = 12;\n    top2Line.textColor = new Color(\"#6ef2ae\");\n\n    const top3Line = w.addText(`•${items[2]}`);\n    top3Line.textSize = 12;\n    top3Line.textColor = new Color(\"#7dbbae\");\n\n    const top4Line = w.addText(`•${items[3]}`);\n    top4Line.textSize = 12;\n    top4Line.textColor = new Color(\"#ff9468\");\n\n    const top5Line = w.addText(`•${items[4]}`);\n    top5Line.textSize = 12;\n    top5Line.textColor = new Color(\"#ffcc66\");\n\n    const top6Line = w.addText(`•${items[5]}`);\n    top6Line.textSize = 12;\n    top6Line.textColor = new Color(\"#ffa7d3\");\n    w.presentMedium();\n    return w;\n  }\n}\n\nasync function getinfo() {\n  const rssRequest = {\n    url:\n      \"https:\/\/api.rss2json.com\/v1\/api.json?rss_url=\" +\n      encodeURIComponent(rsslink),\n  };\n\n  const res = await $.get(rssRequest);\n  log(res);\n  return res;\n}\n\n\/\/更新代码\nfunction update() {\n  log(\"🔔更新脚本开始!\");\n  scripts.forEach(async (script) => {\n    await $.getFile(script);\n  });\n  log(\"🔔更新脚本结束!\");\n}\n\nconst scripts = [\n  {\n    moduleName: \"RSSMonitor\",\n    url:\n      \"https:\/\/raw.githubusercontent.com\/evilbutcher\/Scriptables\/master\/RSSMonitor.js\",\n  },\n];\nif (goupdate == true) update();\n",
  "share_sheet_inputs" : [

  ]
}