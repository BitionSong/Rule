{
  "always_run_in_app" : false,
  "icon" : {
    "color" : "pink",
    "glyph" : "heartbeat"
  },
  "name" : "BilibiliMonitor",
  "script" : "\/*\n * Author: evilbutcher\n * Github: https:\/\/github.com\/evilbutcher\n * 本脚本使用了@Gideon_Senku的Env.scriptable，感谢！\n *\/\nconst goupdate = true;\nconst $ = new importModule(\"Env\")();\n\/\/rid对应不同的B站榜单：0全站，1动画，3音乐，4游戏，5娱乐，36科技，119鬼畜，129舞蹈。\nvar rid = 0;\ntry {\n  const con = new importModule(\"Config\")();\n  var rid = con.bilibili();\n  console.log(\"将使用配置文件内榜单编号\");\n} catch (e) {\n  console.log(\"将使用脚本内榜单编号\");\n}\n\nconst res = await getinfo();\n\nlet widget = createWidget(res);\nScript.setWidget(widget);\nScript.complete();\n\nfunction createWidget(res) {\n  var group = res.data;\n  items = [];\n  for (var i = 0; i < 6; i++) {\n    var item = group[i].title;\n    items.push(item);\n  }\n  console.log(items);\n\n  const w = new ListWidget();\n  const bgColor = new LinearGradient();\n  bgColor.colors = [new Color(\"#1c1c1c\"), new Color(\"#29323c\")];\n  bgColor.locations = [0.0, 1.0];\n  w.backgroundGradient = bgColor;\n  w.centerAlignContent();\n\n  const firstLine = w.addText(`[📣]B站榜单`);\n  firstLine.textSize = 12;\n  firstLine.textColor = Color.white();\n  firstLine.textOpacity = 0.7;\n\n  const top1Line = w.addText(`•${items[0]}`);\n  top1Line.textSize = 12;\n  top1Line.textColor = Color.white();\n\n  const top2Line = w.addText(`•${items[1]}`);\n  top2Line.textSize = 12;\n  top2Line.textColor = new Color(\"#6ef2ae\");\n\n  const top3Line = w.addText(`•${items[2]}`);\n  top3Line.textSize = 12;\n  top3Line.textColor = new Color(\"#7dbbae\");\n\n  const top4Line = w.addText(`•${items[3]}`);\n  top4Line.textSize = 12;\n  top4Line.textColor = new Color(\"#ff9468\");\n\n  const top5Line = w.addText(`•${items[4]}`);\n  top5Line.textSize = 12;\n  top5Line.textColor = new Color(\"#ffcc66\");\n\n  const top6Line = w.addText(`•${items[5]}`);\n  top6Line.textSize = 12;\n  top6Line.textColor = new Color(\"#ffa7d3\");\n  w.presentMedium();\n  return w;\n}\n\nasync function getinfo() {\n  const blRequest = {\n    url: `https:\/\/app.bilibili.com\/x\/v2\/rank\/region?rid=${rid}`,\n  };\n\n  const res = await $.get(blRequest);\n  log(res);\n  return res;\n}\n\n\/\/更新代码\nfunction update() {\n  log(\"🔔更新脚本开始!\");\n  scripts.forEach(async (script) => {\n    await $.getFile(script);\n  });\n  log(\"🔔更新脚本结束!\");\n}\n\nconst scripts = [\n  {\n    moduleName: \"BilibiliMonitor\",\n    url:\n      \"https:\/\/raw.githubusercontent.com\/evilbutcher\/Scriptables\/master\/BilibiliMonitor.js\",\n  },\n];\nif (goupdate == true) update();\n",
  "share_sheet_inputs" : [

  ]
}